<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>P√©nzt√°r ‚Äî Webshop (S√∂t√©t t√©ma)</title>
  <!-- St√≠lus: be√°gyazott CSS (dark theme, k√©k kiemel√©s) -->
  <style>
    :root{
      --bg:#0b1220; --card:#0f1724; --muted:#9aa4b2; --text:#e6eef6; --accent:#1e90ff; --accent-2:#0ea5e9;
      --success:#22c55e; --danger:#ff6b6b; --glass: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Roboto,system-ui,-apple-system,"Helvetica Neue",Arial; background:linear-gradient(180deg,#061021 0%, #071028 100%);color:var(--text);-webkit-font-smoothing:antialiased}
    .wrap{max-width:1100px;margin:28px auto;padding:20px}
    header{display:flex;align-items:center;gap:18px;margin-bottom:18px}
    .brand{display:flex;align-items:center;gap:12px}
  .logo{width:48px;height:48px;border-radius:8px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:700;color:white}
    .site-link{display:block;color:var(--text);font-weight:700;text-decoration:none;margin-bottom:4px}
    .site-link:hover{color:var(--accent)}

    /* Header title styles copied from main CSS to match appearance */
    .header h1 {
      margin: 0;
      display: inline-block;
      font-weight: 800;
      letter-spacing: -0.01em;
      line-height: 1;
      font-size: 1.6rem;
      background: linear-gradient(90deg, #00c489 0%, #2d7ef7 50%, #9b5cf6 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 2px 10px rgba(45,126,247,0.08), 0 6px 20px rgba(0,0,0,0.6);
      padding: 6px 12px;
      border-radius: 10px;
      border: 1px solid rgb(255, 255, 255);
      box-shadow: inset 0 -6px 18px rgba(0,0,0,0.35), 0 6px 24px rgba(2,6,23,0.6);
      vertical-align: middle;
    }
    .header h1::before {
      content: "üöó";
      margin-right: 8px;
      display: inline-block;
      transform: translateY(-1px);
      filter: drop-shadow(0 3px 8px rgba(0,0,0,0.6));
    }
    @media (min-width: 900px) { .header h1 { font-size: 2rem; } }
    @media (max-width: 480px) { .header h1 { font-size: 1.15rem; padding: 4px 8px; border-radius: 8px; } }
    h1{font-size:1.3rem;margin:0}
    p.lead{margin:0;color:var(--muted)}

    .grid{display:grid;grid-template-columns:1fr 380px;gap:18px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border:1px solid rgba(255,255,255,0.04);border-radius:12px;padding:18px}

    label{display:block;font-size:0.86rem;color:var(--muted);margin-bottom:6px}
    input[type=text], input[type=email], input[type=tel], select, textarea{width:100%;padding:11px;border-radius:8px;background:var(--glass);border:1px solid rgba(255,255,255,0.03);color:var(--text);font-size:0.95rem}
    .row{display:flex;gap:12px}
    .muted{color:var(--muted);font-size:0.92rem}
    .section{margin-bottom:14px}

    .radio-row{display:flex;align-items:center;gap:12px;padding:8px;border-radius:8px}
    input[type=radio]{width:16px;height:16px}

    .btn{background:var(--accent);color:white;padding:10px 14px;border-radius:10px;border:none;font-weight:600;cursor:pointer}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text);padding:9px 12px;border-radius:8px;cursor:pointer}

    /* Cart summary */
    .cart-item{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px dashed rgba(255,255,255,0.03)}
    .summary{margin-top:12px}
    .total-big{display:flex;justify-content:space-between;align-items:end;padding-top:16px;border-top:2px solid rgba(255,255,255,0.02);margin-top:12px}
    .total-label{font-size:0.95rem;color:var(--muted)}
    .total-amount{font-size:1.6rem;font-weight:800;color:var(--accent)}

    pre{background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;overflow:auto;color:var(--muted)}

    @media(max-width:900px){.grid{grid-template-columns:1fr}.logo{width:40px;height:40px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header class="header">
      <div class="container" style="display:flex;align-items:center;gap:12px;padding:12px 0;">
        <h1><a href="index.html">Aut√≥alkatr√©sz Webshop</a></h1>
        <div style="margin-left:8px">
          <h2 style="margin:0;font-size:1.1rem;font-weight:600">P√©nzt√°r</h2>
          <p class="lead" style="margin:0">Teljes√≠t√©s √©s fizet√©s ‚Äî biztons√°gos, gyors</p>
        </div>
      </div>
    </header>

    <div class="grid">
      <!-- BAL: checkout ≈±rlap -->
      <main class="card">
        <form id="checkout-form">
          <div class="section">
            <h3 style="margin:0 0 8px">Sz√°ll√≠t√°si adatok</h3>
            <div class="row">
              <div style="flex:1">
                <label for="name">Teljes n√©v</label>
                <input id="name" name="name" type="text" placeholder="Kiss J√°nos" required />
              </div>
              <div style="width:160px">
                <label for="phone">Telefonsz√°m</label>
                <input id="phone" name="phone" type="tel" placeholder="+36 20 123 4567" required />
              </div>
            </div>

            <div style="margin-top:12px">
              <label for="email">E-mail</label>
              <input id="email" name="email" type="email" placeholder="valaki@pelda.hu" required />
            </div>

            <div style="margin-top:12px" class="row">
              <div style="width:160px">
                <label for="zip">Ir√°ny√≠t√≥sz√°m</label>
                <input id="zip" name="zip" type="text" placeholder="1111" />
              </div>
              <div style="flex:1">
                <label for="city">V√°ros</label>
                <input id="city" name="city" type="text" placeholder="Budapest" />
              </div>
            </div>

            <div style="margin-top:12px">
              <label for="address">Utca, h√°zsz√°m</label>
              <input id="address" name="address" type="text" placeholder="F≈ë utca 1." />
            </div>
          </div>

          <div class="section">
            <h3 style="margin:0 0 8px">Sz√°ll√≠t√°si m√≥d</h3>
            <div>
              <label class="radio-row"><input type="radio" name="shipping" value="csomagpont" checked /> Csomagponti √°tv√©tel <span style="margin-left:auto;color:var(--muted)">+500 Ft</span></label>
              <div style="margin:8px 0 0 26px">
                <label for="pickup">V√°lassz csomagpontot</label>
                <select id="pickup">
                  <option value="">-- V√°lassz --</option>
                  <option>Budapest ‚Äî De√°k Ferenc t√©r</option>
                  <option>Debrecen ‚Äî Piac utca</option>
                  <option>Szeged ‚Äî Kossuth Lajos sgt.</option>
                  <option>M√°sik (k√©zzel megadhat√≥)</option>
                </select>
                <div id="pickup-other" style="margin-top:8px;display:none">
                  <input id="pickup-text" type="text" placeholder="Csomagpont c√≠me" />
                </div>
              </div>

              <label class="radio-row" style="margin-top:8px"><input type="radio" name="shipping" value="utanfvet" /> Ut√°nv√©teles sz√°ll√≠t√°s <span style="margin-left:auto;color:var(--muted)">+1000 Ft</span></label>
            </div>
          </div>

          <div class="section">
            <h3 style="margin:0 0 8px">Fizet√©s</h3>
            <label class="radio-row"><input type="radio" name="payment" value="paypal" /> PayPal <span style="margin-left:auto;color:var(--muted)">Online</span></label>
            <label class="radio-row" style="margin-top:6px"><input type="radio" name="payment" value="bank" checked /> Banki √°tutal√°s <span style="margin-left:auto;color:var(--muted)">D√≠jmentes</span></label>
            <label class="radio-row" style="margin-top:6px"><input type="radio" name="payment" value="cod" /> Ut√°nv√©t (k√©szp√©nz)</label>

            <div id="payment-bank" style="margin-top:10px" class="muted">Banki √°tutal√°s: 12345678-12345678-12345678 ‚Äî K√©rj√ºk add meg a rendel√©s sz√°m√°t a k√∂zlem√©nyben.</div>

            <div id="payment-paypal" style="display:none;margin-top:10px">
              <div style="padding:10px;border-radius:8px;background:rgba(14,165,233,0.06);border:1px solid rgba(14,165,233,0.12)">
                <div style="font-weight:700;color:var(--accent)">PayPal fizet√©s (p√©lda)</div>
                <p class="muted" style="margin:6px 0">Itt helyezd el a PayPal JS SDK v2 gombj√°t. P√©lda sablon lent.</p>
                <pre>// &lt;script src="https://www.paypal.com/sdk/js?client-id=YOUR_CLIENT_ID&currency=HUF"&gt;&lt;/script&gt;
// paypal.Buttons({
//   createOrder: (data, actions) =&gt; actions.order.create({ purchase_units: [{ amount: { value: 'TOTAL_IN_HUF' } }] }),
//   onApprove: (data, actions) =&gt; actions.order.capture().then(details =&gt; { /* backend callback */ })
// }).render('#paypal-button-container');</pre>
                <div style="margin-top:8px"><button id="paypal-mock" class="btn">PayPal (p√©lda)</button></div>
              </div>
            </div>
          </div>

          <div style="display:flex;gap:10px;align-items:center;margin-top:6px">
            <button type="submit" class="btn">Rendel√©s lead√°sa</button>
            <button type="button" id="reset" class="btn-ghost">≈∞rlap t√∂rl√©se</button>
          </div>
        </form>
      </main>

      <!-- JOBB: kos√°r √∂sszegz√©s -->
      <aside class="card">
        <h3 style="margin:0 0 8px">Rendel√©s √°ttekint√©s</h3>
        <div id="cart-list">
          <!-- Dinamikus lista -->
        </div>

        <div class="summary">
          <div style="display:flex;justify-content:space-between"><span class="muted">R√©sz√∂sszeg</span><span id="subtotal" class="muted">0 Ft</span></div>
          <div style="display:flex;justify-content:space-between;margin-top:8px"><span class="muted">Sz√°ll√≠t√°s</span><span id="shipping-fee" class="muted">0 Ft</span></div>
          <div class="total-big">
            <div>
              <div class="total-label">√ñsszesen</div>
              <div class="muted" style="font-size:0.92rem">(fizetend≈ë)</div>
            </div>
            <div id="total" class="total-amount">0 Ft</div>
          </div>
        </div>

        <div style="margin-top:12px" class="muted">Megjegyz√©s: Az ut√°nv√©tes fizet√©s a kiv√°lasztott sz√°ll√≠t√°si d√≠jjal egy√ºtt ad√≥dik.</div>
      </aside>
    </div>
  </div>

  <!-- JavaScript: be√°gyazott logika a dinamikus √°raz√°shoz √©s fizet√©s-mutas√≠t√≥khoz -->
  <script>
    (function(){
      // A kos√°r a localStorage-b√≥l t√∂lt≈ëdik (ugyanaz a 'cart' kulcs, amit a main app.js haszn√°l)
      // Ha nincs kos√°r, √ºres t√∂mb√∂t kapunk.
      function loadCartFromStorage(){
        try {
          const raw = localStorage.getItem('cart');
          if(!raw) return [];
          const parsed = JSON.parse(raw);
          // Ensure qty and price numbers
          return Array.isArray(parsed) ? parsed.map(i => ({
            id: i.id,
            name: i.name || i.id,
            price: Number(i.price || 0),
            qty: Number(i.qty || 1),
            image: i.image || '',
            stock: i.stock || 0
          })) : [];
        } catch (e) {
          console.warn('cart load error', e);
          return [];
        }
      }

      // CART lesz a val√≥di kos√°r, amit a f≈ëoldal mentett localStorage-be
      let CART = loadCartFromStorage();

      const SHIPPING = { csomagpont:500, utanfvet:1000 };

      // Form√°tum Hungarian HUF
      const fmt = (n) => new Intl.NumberFormat('hu-HU', { style:'currency', currency:'HUF', maximumFractionDigits:0 }).format(n);

      const cartList = document.getElementById('cart-list');
      const subtotalEl = document.getElementById('subtotal');
      const shippingFeeEl = document.getElementById('shipping-fee');
      const totalEl = document.getElementById('total');

      const checkoutForm = document.getElementById('checkout-form');
      const pickup = document.getElementById('pickup');
      const pickupOther = document.getElementById('pickup-other');
      const pickupText = document.getElementById('pickup-text');

      function renderCart(){
        cartList.innerHTML = '';
        let subtotal = 0;
        CART.forEach(item => {
          const div = document.createElement('div');
          div.className = 'cart-item';
          div.innerHTML = `<div>${item.name} <span class="muted" style="display:block">db: ${item.qty}</span></div><div>${fmt(item.price*item.qty)}</div>`;
          cartList.appendChild(div);
          subtotal += item.price * item.qty;
        });
        subtotalEl.textContent = fmt(subtotal);
        checkoutForm.dataset.subtotal = subtotal;
      }

      function calculate(){
        const base = Number(checkoutForm.dataset.subtotal || 0);
        const ship = checkoutForm.querySelector('input[name="shipping"]:checked').value;
        const shipFee = SHIPPING[ship] || 0;
        shippingFeeEl.textContent = fmt(shipFee);
        totalEl.textContent = fmt(base + shipFee);
      }

      // Events
      checkoutForm.querySelectorAll('input[name="shipping"]').forEach(r => r.addEventListener('change', () => {
        const sel = checkoutForm.querySelector('input[name="shipping"]:checked').value;
        if(sel === 'csomagpont') pickupOther.style.display = 'block'; else pickupOther.style.display = 'none';
        calculate();
      }));

      pickup.addEventListener('change', () => {
        if(pickup.value === 'M√°sik (k√©zzel megadhat√≥)') pickupOther.style.display = 'block'; else pickupOther.style.display = 'none';
      });

      checkoutForm.querySelectorAll('input[name="payment"]').forEach(r => r.addEventListener('change', () => {
        const pay = checkoutForm.querySelector('input[name="payment"]:checked').value;
        document.getElementById('payment-paypal').style.display = (pay==='paypal') ? 'block' : 'none';
        document.getElementById('payment-bank').style.display = (pay==='bank') ? 'block' : 'none';
      }));

      // Submit (placeholder)
      checkoutForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const name = document.getElementById('name').value.trim();
        const email = document.getElementById('email').value.trim();
        if(!name || !email){ alert('K√©rlek t√∂ltsd ki a nevet √©s e-mail c√≠met.'); return; }
        const ship = checkoutForm.querySelector('input[name="shipping"]:checked').value;
        const pay = checkoutForm.querySelector('input[name="payment"]:checked').value;
        const subtotal = Number(checkoutForm.dataset.subtotal || 0);
        const total = subtotal + (SHIPPING[ship]||0);

        // P√©lda √∂sszegz√©s ‚Äî itt integr√°ld a backend v√©gpontot vagy PayPal checkout-ot
        alert(`Rendel√©s el≈ën√©zet:\nN√©v: ${name}\nE-mail: ${email}\nSz√°ll√≠t√°s: ${ship}\nFizet√©s: ${pay}\nV√©g√∂sszeg: ${fmt(total)}`);
      });

      // Reset
      document.getElementById('reset').addEventListener('click', () => { checkoutForm.reset(); document.getElementById('payment-paypal').style.display='none'; pickupOther.style.display='none'; renderCart(); calculate(); });

      // PayPal mock button
      document.getElementById('paypal-mock').addEventListener('click', (e) => {
        e.preventDefault();
        // Itt j√∂nne a PayPal v2 JS SDK integr√°ci√≥ (client-id, createOrder, onApprove). P√©lda tov√°bb√≠t√°s:
        const totalVal = totalEl.textContent.replace(/\D/g,'');
        alert('PayPal p√©lda ‚Äî ide integr√°ld a PayPal Buttons k√≥dot. √ñsszeg (HUF): ' + totalVal);
      });

      // Init
      renderCart();
      calculate();
      // ensure payment display initial state
      document.getElementById('payment-paypal').style.display='none';
    })();
  </script>
</body>
</html>
